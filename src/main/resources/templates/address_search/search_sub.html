<!DOCTYPE html>
<html lang="ko">
<style>
  .btn-clear {
    display: none !important; /* 강제로 숨김 */
  }
  .btn-close {
    display: none !important; /* 강제로 숨김 */
  }

</style>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>[KTFOMS] AI 기반 연료전지 인프라 구축 - 모바일</title>
  <link rel="shortcut icon" href="/img/favicon.ico">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/smoothness/jquery-ui.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/> <!-- Slide css -->
  <link rel="stylesheet" href="/resource/ax5ui/ax5ui.all.css">
  <link rel="stylesheet" type="text/css" href="/assets_mobile/css/import.css">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>

  <script src="/assets_mobile/js/ui.js"></script> <!-- Common js -->
  <script th:inline="javascript">
    var sandanData = /*[[${session.sandanList}]]*/ [];
  </script>


  <script type="text/javascript" src="/resource/ax5ui/ax5ui.all.min.js?v=1000"></script>

  <script type="text/javascript" src="/js/ax5commUtil.js?v=1070"></script>

  <script src="/js/common.js?v=1060"></script>
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script> <!-- Slide js -->
  <script src="/js/Mobile.js"></script>
</head>

<body>
<div class="mobile-wrapper page-ticket-list"><!-- ★페이지 Class명 -->
  <!-- [모바일] 헤더  -->
  <div class="mobile-layout-header">
    <header>
      <div class="left">
        <a href="#" title="전체메뉴" class="logo">
        </a>
      </div>
      <div class="left" style="margin-left:35px;">
        <h2>FACT CHECK</h2>
      </div>
      <div class="right">
        <a href="#" title="전체메뉴" class="btn-menu">
          <img src="/assets_mobile/images/icon/btn-menu.svg" alt="전체메뉴 아이콘">
        </a>
      </div>
    </header>
  </div> <!-- //mobile-layout-header end-->

  <!-- [모바일] 메뉴  -->
  <div th:insert="~{mobile/mobile_menu :: mobile_menu}"></div>
  <!-- [모바일] 컨덴츠  -->
  <div class="mobile-layout-contents">
    <!--- (레이아웃) Contents 영역 -->
    <div class="layout-contents">
      <!-- 검색 영역  -->
      <div class="search-wrap">

      </div>
      <!-- 컨텐츠 영역  -->
      <div class="contents-wrap">
        <dl style="margin-bottom: 10px">
          <button onclick="openModal()" style="margin-bottom: 10px">주소 검색</button>

          <div id="postcodeModal" class="modal" style="display: none">
            <div class="modal-content">
              <div style="display: flex">
                <div class="modal-header">주소 검색</div>
                <button class="modal-close" onclick="closeModal()" style="width: 30px; margin-left: auto">×</button>
              </div>
              <div id="postcodeContainer" style="width: 100%;"></div>
            </div>
          </div>

          <form>
            <label for="postno">우편번호:</label>
            <input type="text" id="postno" readonly><br><br>
            <label for="address1">도로명 주소:</label>
            <input type="text" id="address1" readonly><br><br>
            <div id="guide" style="display:none; color: #888; font-size: 14px;"></div>
          </form>

          <button onclick="searchAddress()" style="margin-top: 10px">등기부 확인</button>
        </dl>
      </div> <!--// contents-wrap end-->
    </div> <!--//layout-contents end -->

  </div> <!-- //mobile-layout-contents end-->
</div> <!-- //page-wrapper end-->
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script th:inline="javascript">
  // // Thymeleaf에서 값 설정: Null 체크와 기본값 처리
  // var groupid = [[${session.groupid != null ? session.groupid : 'null'}]];
  // var id = /*[[${id != null ? id : 'null'}]]*/;
  // var groupname = /*[[${groupname != null ? groupname : 'null'}]]*/;
  // var username = /*[[${username != null ? username : 'null'}]]*/;
  //
  // // 로컬스토리지에 값 유지 (null 또는 빈 문자열은 저장하지 않음)
  // if (groupid && groupid !== 'null') localStorage.setItem('groupid', groupid);
  // if (id && id !== 'null') localStorage.setItem('id', id);
  // if (username && username !== 'null') localStorage.setItem('username', username);
  // if (groupname && groupname !== 'null') localStorage.setItem('groupname', groupname);
</script>
<script>
  function openModal() {
    document.getElementById('postcodeModal').style.display= 'block';

    new daum.Postcode({
      oncomplete: function(data) {
        var roadAddr = data.roadAddress;
        var extraRoadAddr = '';

        if (data.bname !== '' && /[동|로|가]$/g.test(data.bname)) {
          extraRoadAddr += data.bname;
        }
        if (data.buildingName !== '' && data.apartment === 'Y') {
          extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
        }
        if (extraRoadAddr !== '') {
          extraRoadAddr = ' (' + extraRoadAddr + ')';
        }

        document.getElementById('postno').value = data.zonecode;
        document.getElementById('address1').value = roadAddr;

        var guideTextBox = document.getElementById("guide");
        if (data.autoRoadAddress) {
          var expRoadAddr = data.autoRoadAddress + extraRoadAddr;
          guideTextBox.innerHTML = '(예상 도로명 주소 : ' + expRoadAddr + ')';
          guideTextBox.style.display = 'block';
        } else if (data.autoJibunAddress) {
          var expJibunAddr = data.autoJibunAddress;
          guideTextBox.innerHTML = '(예상 지번 주소 : ' + expJibunAddr + ')';
          guideTextBox.style.display = 'block';
        } else {
          guideTextBox.innerHTML = '';
          guideTextBox.style.display = 'none';
        }

        closeModal();
      },
      onresize: function(size) {
        // 동적 스타일 적용
        const layers = document.querySelectorAll('[id^="__daum__layer_"]');
        layers.forEach(layer => {
          layer.style.width = '100%';
          layer.style.height = '500px';
          layer.style.overflow = 'hidden';
          layer.style.backgroundColor = '#fff';
        });
      }

    }).embed(document.getElementById('postcodeContainer'));
  }

  function closeModal() {
    document.getElementById('postcodeModal').style.display= 'none';
  }
</script>
<script type="text/javascript">

  function searchAddress() {
    let data2 = [];
    $.ajax({
      url: '/api/tilko/todayGrid',
      type: 'GET',
      data: {
        'address1': $('#address1').val()
      },
      async: false,
      success: function (data) {
        data2 = data.data;
        console.log("data2", data2);
      }
    });
  }


</script>
</body>
</html>
